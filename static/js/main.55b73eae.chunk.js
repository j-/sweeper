(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(59)},34:function(e,t){},39:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),o=n(9),u=n(2),i=function(){return String(Date.now())},c=function(e){return{type:"TOGGLE_SETTINGS",data:{show:e}}},l=n(18),m=n.n(l),f=n(5),s=n(15),d=function(e){return Object(u.a)({},e,{opened:!0})},b=function(e){return Object(u.a)({},e,{mined:!0})},v=function(e){return Object(u.a)({},e,{flagged:!e.flagged})},g={opened:!1,flagged:!1,mined:!1,neighborMineCount:0};b(g);function p(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e,t){return new Array(e*t).fill(g)},O=function(e,t,n){return[].concat(Object(s.a)(e.slice(0,t)),[n(e[t])],Object(s.a)(e.slice(t+1)))},y=function(e,t){return O(e,t,d)},j=function(e,t){return O(e,t,b)},N=function(e,t,n,r){var a=r>0&&t>1,o=r<t-1&&t>1,u=n>0&&e>1,i=n<e-1&&e>1,c=[];return a&&u&&c.push([n-1,r-1]),a&&c.push([n,r-1]),a&&i&&c.push([n+1,r-1]),u&&c.push([n-1,r]),i&&c.push([n+1,r]),o&&u&&c.push([n-1,r+1]),o&&c.push([n,r+1]),o&&i&&c.push([n+1,r+1]),c};function S(e){return e-2}var G={showSettings:!1,seed:"DEFAULT_SEED",mineCount:20,boardWidth:12,boardHeight:12,boardCells:E(12,12),isGameStarted:!1,isGameOver:!1,didWin:!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;if(function(e){return"SET_BOARD_DIMENSIONS"===e.type}(t)){var n=t.data,r=n.width,a=n.height;return Object(u.a)({},e,{boardWidth:r,boardHeight:a,boardCells:E(r,a),isGameStarted:!1,isGameOver:!1,didWin:!1})}if(function(e){return"OPEN_CELL"===e.type}(t)){var o=t.data,i=o.x,c=o.y,l=W(e,i,c),s=e.boardCells,d=e.isGameOver,b=e.isGameStarted,g=e.didWin;if(d)return e;var h=s[l];if(h.flagged||h.opened)return e;var C=e.seed,M=e.mineCount,w=e.boardWidth,T=e.boardHeight;return s=y(s,l),b?h.mined&&(d=!0):(b=!0,s=function(e,t,n){for(var r=function(t){var r=Object(f.a)(t,2),a=r[0],o=r[1];return e[a+o*n].mined},a=function(a){var o=a%t,i=Math.floor(a/t),c=N(t,n,o,i).filter(r).length;e=O(e,a,function(e){return Object(u.a)({},e,{neighborMineCount:c})})},o=0;o<e.length;o++)a(o);return e}(s=function(e,t,n){var r=e.length;if(t>S(r))throw new Error("Too many mines");for(;;){var a=Math.floor(n()*r),o=e[a];if(!o.opened&&!o.mined&&(e=j(e,a),--t<=0))break}return e}(s,M,function(e){return m()(e)}(C)),w,T)),h.mined||(s=function e(t,n,r,a,o){var u=a+o*n,i=t[u];if(t=y(t,u),i.neighborMineCount>0)return t;var c,l=p(N(n,r,a,o));try{for(l.s();!(c=l.n()).done;){var m=c.value,s=Object(f.a)(m,2),d=s[0],b=s[1],v=t[d+b*n];v.flagged||v.opened||(t=e(t,n,r,d,b))}}catch(g){l.e(g)}finally{l.f()}return t}(s,w,T,i,c)),g=s.every(function(e){return(e.mined||e.opened)&&e.mined!==e.opened}),d=d||g,Object(u.a)({},e,{boardCells:s,isGameStarted:b,isGameOver:d,didWin:g})}if(function(e){return"FLAG_CELL"===e.type}(t)){var A=t.data,D=A.x,x=A.y;if(e.isGameOver)return e;var _=e.boardCells;return _=function(e,t){return O(e,t,v)}(_,W(e,D,x)),Object(u.a)({},e,{boardCells:_})}if(function(e){return"RESTART_GAME"===e.type}(t))return Object(u.a)({},e,{seed:t.data.seed,boardCells:E(e.boardWidth,e.boardHeight),isGameStarted:!1,isGameOver:!1,didWin:!1});if(function(e){return"NEW_GAME"===e.type}(t)){var L=t.data,k=L.rows,F=L.cols,I=L.mines;return Object(u.a)({},e,{boardWidth:F,boardHeight:k,mineCount:I,showSettings:!1,boardCells:E(F,k),isGameStarted:!1,isGameOver:!1,didWin:!1})}return function(e){return"SET_SEED"===e.type}(t)?Object(u.a)({},e,{seed:t.data.seed}):function(e){return"TOGGLE_SETTINGS"===e.type}(t)?Object(u.a)({},e,{showSettings:t.data.show}):e},M=function(e){return e.showSettings},w=function(e){return e.boardWidth},T=function(e){return e.boardHeight},A=function(e){return[e.boardWidth,e.boardHeight]},D=function(e){return e.boardCells},W=function(e,t,n){return e.boardWidth*n+t},x=function(e){return e.isGameStarted},_=function(e){return e.isGameOver},L=function(e){return e.didWin},k=function(e){return e.mineCount},F=function(e){return Math.max(0,k(e)-function(e){return e.boardCells.map(function(e){return e.flagged}).filter(Boolean).length}(e))},I=n(19),B=n(1),H=n(11),R=function(e){return r.createElement("button",Object.assign({type:"button",className:"btn btn-light"},e))},U=function(e){var t=Object(H.a)({},e),n=Object(B.b)(),a=r.useCallback(function(e){e.preventDefault(),n(function(){return{type:"RESTART_GAME",data:{seed:arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()}}}())},[n]);return r.createElement(R,Object.assign({onClick:a},t))},z=function(e){var t=Object(H.a)({},e),n=Object(B.b)(),a=r.useCallback(function(e){e.preventDefault(),n(c(!0))},[n]);return r.createElement(R,Object.assign({onClick:a},t))},J=function(){var e=Object(B.b)(),t=r.useState(String(Object(B.c)(w))),n=Object(f.a)(t,2),a=n[0],o=n[1],u=r.useState(String(Object(B.c)(k))),i=Object(f.a)(u,2),l=i[0],m=i[1];return r.createElement("div",{className:"NewGameMenu card card-body",style:{maxWidth:"20em"}},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"NewGameMenu-size"},"Size"),r.createElement("br",null),r.createElement("input",{id:"NewGameMenu-size",className:"form-control",type:"number",value:a,onChange:function(e){var t=e.currentTarget.value;o(t||"")},onBlur:function(){var e=Math.max(5,Math.min(20,Number(a)||0));o(String(e)),m(String(Math.max(1,Math.min(S(Number(e)*Number(e)),Number(l)))))}})),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"NewGameMenu-mines"},"Mines"),r.createElement("br",null),r.createElement("input",{id:"NewGameMenu-mines",className:"form-control",type:"number",value:l,onChange:function(e){var t=e.currentTarget.value;m(t||"")},onBlur:function(){m(String(Math.max(1,Math.min(S(Number(a)*Number(a)),Number(l)))))}})),r.createElement("div",null,r.createElement(R,{onClick:function(t){t.preventDefault(),e(c(!1))}},"Cancel")," ",r.createElement(R,{className:"btn btn-primary",onClick:function(t){t.preventDefault(),e(function(e,t,n){return{type:"NEW_GAME",data:{rows:e,cols:t,mines:n}}}(a,a,l))}},"Start game")))},P=n(21),Y=n.n(P),$=(n(39),function(e){var t=e.count;return r.createElement("span",{className:"NeighborMineCount NeighborMineCount--".concat(t)},t)}),q=(n(41),function(e){var t=e.cell;return r.createElement("div",{className:"GameCellOpened"},r.createElement("span",{className:"GameCellOpened-content"},t.mined?"\ud83d\udca5":t.neighborMineCount>0?r.createElement($,{count:t.neighborMineCount}):null))}),K=(n(43),function(e){var t=e.cell,n=e.onOpen,a=e.onFlag,o=e.children;return r.createElement("button",{className:"GameCellUnopened",type:"button",tabIndex:-1,onContextMenu:function(e){e.preventDefault(),a()},onMouseDown:function(e){e.preventDefault()},onMouseUp:function(e){e.preventDefault(),2!==e.button&&n()}},t?t.flagged&&t.mined?"\ud83d\udea9":t.flagged&&!t.mined?"\ud83d\udca5":!t.flagged&&t.mined?"\ud83d\udca3":null:o)}),Q=(n(45),function(e){var t=e.isGameOver,n=e.cell,a=e.onOpen,o=e.onFlag;return r.createElement("div",{className:"GameCell"},n.opened?r.createElement(q,{cell:n}):r.createElement(K,{cell:t?n:null,onOpen:a,onFlag:o},n.flagged?"\ud83d\udea9":null))}),V=(n(47),function(e){return e.preventDefault()}),X=function(){for(var e=Object(B.c)(A),t=Object(f.a)(e,2),n=t[0],a=t[1],o=Object(B.c)(D),u=Object(B.c)(_),i=Object(B.b)(),c=[],l="repeat(".concat(a,", 1fr) / repeat(").concat(n,", 1fr)"),m=Y()("GameBoard",u&&"GameBoard--is-game-over"),s=function(e){var t=o[e],a=e%n,l=Math.floor(e/n);c.push(r.createElement(Q,{key:e,isGameOver:u,cell:t,onOpen:function(){return i(function(e,t){return{type:"OPEN_CELL",data:{x:e,y:t}}}(a,l))},onFlag:function(){return i(function(e,t){return{type:"FLAG_CELL",data:{x:e,y:t}}}(a,l))}}))},d=0;d<n*a;d++)s(d);return r.createElement("div",{className:m,style:{gridTemplate:l},onContextMenu:V},c)},Z=(n(49),function(){return r.createElement("p",null,"You win")}),ee=function(){return r.createElement("p",null,"You lose")},te=function(){return r.createElement("p",null,"Mines: ",Object(B.c)(F))},ne=function(){return r.createElement("p",null,"Click any cell to start game")},re=function(){var e=Object(B.c)(x),t=Object(B.c)(_),n=Object(B.c)(L);return r.createElement("div",{className:"GameStatus"},n?r.createElement(Z,null):t?r.createElement(ee,null):e?r.createElement(te,null):r.createElement(ne,null))},ae=(n(51),function(){var e=Object(B.c)(w),t=Object(B.c)(T);return r.createElement("div",{className:"Game"},r.createElement("div",{className:"Game-board mt-4 mb-4",style:{width:40*e,height:40*t}},r.createElement(X,null)),r.createElement(re,null))}),oe=(n(53),function(){var e=Object(B.c)(M);return r.createElement("div",{className:"App container pt-5 pb-5"},r.createElement("nav",{className:"navbar navbar-light bg-light"},r.createElement(U,{className:"btn btn-dark mr-auto"},"New game"),r.createElement(z,{className:"btn btn-light ml-1"},"Options")),r.createElement("div",{className:"d-flex flex-column align-items-center"},e&&r.createElement("div",{className:"mt-4 mb-4"},r.createElement(J,null)),!e&&r.createElement(ae,null)))}),ue=(n(55),n(57),Object(o.createStore)(C,Object(I.composeWithDevTools)()));"DEFAULT_SEED"===ue.getState().seed&&ue.dispatch(function(){return{type:"SET_SEED",data:{seed:arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()}}}());var ie=document.getElementById("root");Object(a.render)(r.createElement(B.a,{store:ue},r.createElement(oe,null)),ie)}},[[22,2,1]]]);
//# sourceMappingURL=main.55b73eae.chunk.js.map