(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(57)},34:function(e,t){},39:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),u=n(9),o=n(2),i=function(){return String(Date.now())},c=function(e){return{type:"TOGGLE_SETTINGS",data:{show:e}}},l=n(18),m=n.n(l),f=n(5),d=n(15),s=function(e){return Object(o.a)({},e,{opened:!0})},b=function(e){return Object(o.a)({},e,{mined:!0})},p=function(e){return Object(o.a)({},e,{flagged:!e.flagged})},v={opened:!1,flagged:!1,mined:!1,neighborMineCount:0};b(v);function E(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,u=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw u}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e,t){return new Array(e*t).fill(v)},O=function(e,t,n){return[].concat(Object(d.a)(e.slice(0,t)),[n(e[t])],Object(d.a)(e.slice(t+1)))},y=function(e,t){return O(e,t,s)},S=function(e,t){return O(e,t,b)},j=function(e,t,n,r){var a=r>0&&t>1,u=r<t-1&&t>1,o=n>0&&e>1,i=n<e-1&&e>1,c=[];return a&&o&&c.push([n-1,r-1]),a&&c.push([n,r-1]),a&&i&&c.push([n+1,r-1]),o&&c.push([n-1,r]),i&&c.push([n+1,r]),u&&o&&c.push([n-1,r+1]),u&&c.push([n,r+1]),u&&i&&c.push([n+1,r+1]),c};function C(e){return e-2}var G={showSettings:!1,seed:"DEFAULT_SEED",mineCount:20,boardWidth:12,boardHeight:12,boardCells:g(12,12),isGameStarted:!1,isGameOver:!1,didWin:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;if(function(e){return"SET_BOARD_DIMENSIONS"===e.type}(t)){var n=t.data,r=n.width,a=n.height;return Object(o.a)({},e,{boardWidth:r,boardHeight:a,boardCells:g(r,a),isGameStarted:!1,isGameOver:!1,didWin:!1})}if(function(e){return"OPEN_CELL"===e.type}(t)){var u=t.data,i=u.x,c=u.y,l=W(e,i,c),d=e.boardCells,s=e.isGameOver,b=e.isGameStarted,v=e.didWin;if(s)return e;var h=d[l];if(h.flagged||h.opened)return e;var M=e.seed,N=e.mineCount,w=e.boardWidth,A=e.boardHeight;return d=y(d,l),b?h.mined&&(s=!0):(b=!0,d=function(e,t,n){for(var r=function(t){var r=Object(f.a)(t,2),a=r[0],u=r[1];return e[a+u*n].mined},a=function(a){var u=a%t,i=Math.floor(a/t),c=j(t,n,u,i).filter(r).length;e=O(e,a,function(e){return Object(o.a)({},e,{neighborMineCount:c})})},u=0;u<e.length;u++)a(u);return e}(d=function(e,t,n){var r=e.length;if(t>C(r))throw new Error("Too many mines");for(;;){var a=Math.floor(n()*r),u=e[a];if(!u.opened&&!u.mined&&(e=S(e,a),--t<=0))break}return e}(d,N,function(e){return m()(e)}(M)),w,A)),h.mined||(d=function e(t,n,r,a,u){var o=a+u*n,i=t[o];if(t=y(t,o),i.neighborMineCount>0)return t;var c,l=E(j(n,r,a,u));try{for(l.s();!(c=l.n()).done;){var m=c.value,d=Object(f.a)(m,2),s=d[0],b=d[1],p=t[s+b*n];p.flagged||p.opened||(t=e(t,n,r,s,b))}}catch(v){l.e(v)}finally{l.f()}return t}(d,w,A,i,c)),v=d.every(function(e){return(e.mined||e.opened)&&e.mined!==e.opened}),s=s||v,Object(o.a)({},e,{boardCells:d,isGameStarted:b,isGameOver:s,didWin:v})}if(function(e){return"FLAG_CELL"===e.type}(t)){var T=t.data,D=T.x,_=T.y;if(e.isGameOver)return e;var L=e.boardCells;return L=function(e,t){return O(e,t,p)}(L,W(e,D,_)),Object(o.a)({},e,{boardCells:L})}if(function(e){return"RESTART_GAME"===e.type}(t))return Object(o.a)({},e,{seed:t.data.seed,boardCells:g(e.boardWidth,e.boardHeight),isGameStarted:!1,isGameOver:!1,didWin:!1});if(function(e){return"NEW_GAME"===e.type}(t)){var x=t.data,k=x.rows,I=x.cols,U=x.mines;return Object(o.a)({},e,{boardWidth:I,boardHeight:k,mineCount:U,showSettings:!1,boardCells:g(I,k),isGameStarted:!1,isGameOver:!1,didWin:!1})}return function(e){return"SET_SEED"===e.type}(t)?Object(o.a)({},e,{seed:t.data.seed}):function(e){return"TOGGLE_SETTINGS"===e.type}(t)?Object(o.a)({},e,{showSettings:t.data.show}):e},N=function(e){return e.showSettings},w=function(e){return e.boardWidth},A=function(e){return e.boardHeight},T=function(e){return[e.boardWidth,e.boardHeight]},D=function(e){return e.boardCells},W=function(e,t,n){return e.boardWidth*n+t},_=function(e){return e.isGameStarted},L=function(e){return e.isGameOver},x=function(e){return e.didWin},k=function(e){return e.mineCount},I=function(e){return Math.max(0,k(e)-function(e){return e.boardCells.map(function(e){return e.flagged}).filter(Boolean).length}(e))},U=n(19),B=n(1),H=n(21),F=n.n(H),R=(n(39),function(e){var t=e.count;return r.createElement("span",{className:"NeighborMineCount NeighborMineCount--".concat(t)},t)}),z=(n(41),function(e){var t=e.cell;return r.createElement("div",{className:"GameCellOpened"},r.createElement("span",{className:"GameCellOpened-content"},t.mined?"\ud83d\udca5":t.neighborMineCount>0?r.createElement(R,{count:t.neighborMineCount}):null))}),J=(n(43),function(e){return e.preventDefault()}),P=function(e){var t=e.cell,n=e.onMouseUp,a=e.children;return r.createElement("button",{className:"GameCellUnopened",type:"button",tabIndex:-1,onContextMenu:J,onMouseDown:J,onMouseUp:n},t?t.flagged&&t.mined?"\ud83d\udea9":t.flagged&&!t.mined?"\ud83d\udca5":!t.flagged&&t.mined?"\ud83d\udca3":null:a)},Y=(n(45),function(e){var t=e.isGameOver,n=e.cell,a=e.onMouseUp;return r.createElement("div",{className:"GameCell"},n.opened?r.createElement(z,{cell:n}):r.createElement(P,{cell:t?n:null,onMouseUp:a},n.flagged?"\ud83d\udea9":null))}),$=(n(47),function(e){return e.preventDefault()}),q=function(){for(var e=Object(B.c)(T),t=Object(f.a)(e,2),n=t[0],a=t[1],u=Object(B.c)(D),o=Object(B.c)(L),i=Object(B.b)(),c=[],l="repeat(".concat(a,", 1fr) / repeat(").concat(n,", 1fr)"),m=F()("GameBoard",o&&"GameBoard--is-game-over"),d=function(e){var t=u[e],a=e%n,l=Math.floor(e/n);c.push(r.createElement(Y,{key:e,isGameOver:o,cell:t,onMouseUp:function(e){e.preventDefault();var t=e.getModifierState("Meta")||e.getModifierState("Control")||2===e.button;i(t?function(e,t){return{type:"FLAG_CELL",data:{x:e,y:t}}}(a,l):function(e,t){return{type:"OPEN_CELL",data:{x:e,y:t}}}(a,l))}}))},s=0;s<n*a;s++)d(s);return r.createElement("div",{className:m,style:{gridTemplate:l},onContextMenu:$},c)},K=(n(49),function(){return r.createElement("p",null,"You win")}),Q=function(){return r.createElement("p",null,"You lose")},V=function(){return r.createElement("p",null,"Mines: ",Object(B.c)(I))},X=function(){return r.createElement("p",null,"Click any cell to start game")},Z=function(){var e=Object(B.c)(_),t=Object(B.c)(L),n=Object(B.c)(x);return r.createElement("div",{className:"GameStatus"},n?r.createElement(K,null):t?r.createElement(Q,null):e?r.createElement(V,null):r.createElement(X,null))},ee=n(11),te=function(e){return r.createElement("button",Object.assign({type:"button",className:"btn btn-light"},e))},ne=function(e){var t=Object(ee.a)({},e),n=Object(B.b)(),a=r.useCallback(function(e){e.preventDefault(),n(function(){return{type:"RESTART_GAME",data:{seed:arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()}}}())},[n]);return r.createElement(te,Object.assign({onClick:a,className:"btn btn-dark"},t),"New game")},re=function(e){var t=Object(ee.a)({},e),n=Object(B.b)(),a=r.useCallback(function(e){e.preventDefault(),n(c(!0))},[n]);return r.createElement(te,Object.assign({onClick:a,className:"btn btn-light"},t),"Settings")},ae=function(){var e=Object(B.b)(),t=r.useState(String(Object(B.c)(w))),n=Object(f.a)(t,2),a=n[0],u=n[1],o=r.useState(String(Object(B.c)(k))),i=Object(f.a)(o,2),l=i[0],m=i[1];return r.createElement("div",{className:"NewGameMenu"},r.createElement("div",null,r.createElement("label",{htmlFor:"NewGameMenu-size"},"Size"),r.createElement("br",null),r.createElement("input",{id:"NewGameMenu-size",className:"form-control",type:"number",value:a,onChange:function(e){var t=e.currentTarget.value;u(t||"")},onBlur:function(){var e=Math.max(5,Math.min(20,Number(a)||0));u(String(e)),m(String(Math.max(1,Math.min(C(Number(e)*Number(e)),Number(l)))))}})),r.createElement("div",null,r.createElement("label",{htmlFor:"NewGameMenu-mines"},"Mines"),r.createElement("br",null),r.createElement("input",{id:"NewGameMenu-mines",className:"form-control",type:"number",value:l,onChange:function(e){var t=e.currentTarget.value;m(t||"")},onBlur:function(){m(String(Math.max(1,Math.min(C(Number(a)*Number(a)),Number(l)))))}})),r.createElement("div",null,r.createElement(te,{onClick:function(t){t.preventDefault(),e(c(!1))}},"Cancel"),r.createElement(te,{className:"btn btn-primary",onClick:function(t){t.preventDefault(),e(function(e,t,n){return{type:"NEW_GAME",data:{rows:e,cols:t,mines:n}}}(a,a,l))}},"Start game")))},ue=(n(51),function(){var e=Object(B.c)(N),t=Object(B.c)(w),n=Object(B.c)(A);return e?r.createElement("div",{className:"App"},r.createElement(ae,null)):r.createElement("div",{className:"App"},r.createElement("div",{className:"App-game-board",style:{width:40*t,height:40*n}},r.createElement(q,null)),r.createElement(Z,null),r.createElement("br",null),r.createElement("br",null),r.createElement(ne,null),r.createElement("br",null),r.createElement("br",null),r.createElement(re,null))}),oe=(n(53),n(55),Object(u.createStore)(M,Object(U.composeWithDevTools)()));"DEFAULT_SEED"===oe.getState().seed&&oe.dispatch(function(){return{type:"SET_SEED",data:{seed:arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()}}}());var ie=document.getElementById("root");Object(a.render)(r.createElement(B.a,{store:oe},r.createElement(ue,null)),ie)}},[[22,2,1]]]);
//# sourceMappingURL=main.e1a11b0a.chunk.js.map